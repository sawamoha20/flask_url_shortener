<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>mosouab Url shortener</title>
</head>
<body>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-success" role="alert">
            {{message}}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    <form action="/" method="POST" >
        <div class="form-group">
            <input class="form-control" type="text" name="main-url" id="main-url" pattern="[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)" required>
            <input class="form-control"  name="short-url" id="short-url">
            <button class="btn btn-primary"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-plus" fill="white" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
              </svg>
              </button>
        </div>
    </form>
    <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Original Url</th>
            <th scope="col">Shortened Url</th>
            <th scope="col">number of visitors</th>
          </tr>
        </thead>
        <tbody>
          {% for i in Data %}
            <tr>
              <th scope="row">{{i.id}}</th>
              <td><a href="{{i.URl}}">{{i.URl}}</a></td>
              <td><a href="http://127.0.0.1:5000/{{i.shrt_value}}" target="_blank">{{i.shrt_value}}</a></td>
              <td>@mdo</td>
              <td><a class="btn btn-danger btn-sm" href="{{ url_for('delete', id=i.id) }}">Delete</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
</body>
</html>
